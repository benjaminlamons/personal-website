<!DOCTYPE html>
<html>
<head>
  <title>Poker Tracker</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; }
    h1 { color: #2c3e50; text-align: center; }
    input, select { margin: 5px; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background-color: #f2f2f2; }
    .win { color: green; }
    .loss { color: red; }
    .back { display: inline-block; margin-bottom: 20px; padding: 10px 20px; background-color: #3498db; color: white; text-decoration: none; border-radius: 5px; }
    .back:hover { background-color: #2980b9; }
  </style>
</head>
<body>
  <a class="back" href="index.html">‚Üê Back to Home</a>
  <h1>Poker Tracker</h1>

  <h2>Add a Hand</h2>
  <form id="handForm">
    <label>Date: <input type="date" id="date" required></label>
    <label>Position:
      <select id="position">
        <option>Early</option>
        <option>Middle</option>
        <option>Late</option>
        <option>Blinds</option>
      </select>
    </label>
    <label>Hole Cards: <input type="text" id="cards" placeholder="AhKd" required></label>
    <label>Action Pre-flop: <input type="text" id="preflop" placeholder="Raise/Call/Fold"></label>
    <label>Action Post-flop: <input type="text" id="postflop" placeholder="Check/Bet/Fold"></label>
    <label>Outcome:
      <select id="outcome">
        <option>Win</option>
        <option>Loss</option>
      </select>
    </label>
    <button type="submit">Add Hand</button>
  </form>

  <h2>Hand History</h2>
  <table id="handTable">
    <thead>
      <tr>
        <th>Date</th>
        <th>Position</th>
        <th>Hole Cards</th>
        <th>Pre-flop</th>
        <th>Post-flop</th>
        <th>Outcome</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <h2>Stats</h2>
  <p>Total Hands: <span id="totalHands">0</span></p>
  <p>Wins: <span id="wins">0</span></p>
  <p>Losses: <span id="losses">0</span></p>
  <p>VPIP: <span id="vpip">0%</span></p>
  <p>PFR: <span id="pfr">0%</span></p>

  <script>
    let hands = JSON.parse(localStorage.getItem('hands')) || [];

    function renderHands() {
      const tbody = document.querySelector("#handTable tbody");
      tbody.innerHTML = '';
      hands.forEach(hand => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${hand.date}</td>
          <td>${hand.position}</td>
          <td>${hand.cards}</td>
          <td>${hand.preflop}</td>
          <td>${hand.postflop}</td>
          <td class="${hand.outcome === 'Win' ? 'win' : 'loss'}">${hand.outcome}</td>
        `;
        tbody.appendChild(tr);
      });
      updateStats();
    }

    function updateStats() {
      const total = hands.length;
      const wins = hands.filter(h => h.outcome === 'Win').length;
      const losses = total - wins;
      document.getElementById('totalHands').innerText = total;
      document.getElementById('wins').innerText = wins;
      document.getElementById('losses').innerText = losses;

      const vpipHands = hands.filter(h => h.preflop.toLowerCase() !== 'fold').length;
      const pfrHands = hands.filter(h => h.preflop.toLowerCase().includes('raise')).length;
      document.getElementById('vpip').innerText = total ? ((vpipHands/total)*100).toFixed(1) + '%' : '0%';
      document.getElementById('pfr').innerText = total ? ((pfrHands/total)*100).toFixed(1) + '%' : '0%';
    }

    document.getElementById('handForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const hand = {
        date: document.getElementById('date').value,
        position: document.getElementById('position').value,
        cards: document.getElementById('cards').value,
        preflop: document.getElementById('preflop').value,
        postflop: document.getElementById('postflop').value,
        outcome: document.getElementById('outcome').value
      };
      hands.push(hand);
      localStorage.setItem('hands', JSON.stringify(hands));
      renderHands();
      this.reset();
    });

    renderHands();
  </script>
</body>
</html>
